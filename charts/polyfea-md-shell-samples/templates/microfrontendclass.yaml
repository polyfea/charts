{{- if .Values.enabled }}
apiVersion: polyfea.github.io/v1alpha1
kind: MicroFrontendClass
metadata:
  name: fea
  labels:
    {{- include "polyfea-md-shell-samples.labels" . | nindent 4 }}
  annotations:
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "1"
spec:
  title: {{ .Values.microfrontendClass.title | quote }}
  baseUri: {{ .Values.microfrontendClass.baseUri | quote }}
  extraMetaTags:
  - name: viewport
    content: width=device-width, initial-scale=1
  progressiveWebApp:
    webAppManifest:
      name: {{ .Values.microfrontendClass.appName | quote }}
      start_url: {{ .Values.microfrontendClass.baseUri | quote }}
      display: "standalone"
      icons:
        - src: {{ .Values.microfrontendClass.iconUrl | quote }}
          sizes: "256x256"
          type: "image/png"
    cacheOptions:
      preCache:
        - url: polyfea/boot.mjs
      cacheRoutes:
        - pattern: .*.jpg
  cspHeader: >-
    default-src 'self'; font-src 'self'; script-src 'strict-dynamic'
    'nonce-{NONCE_VALUE}'; worker-src 'self'; manifest-src 'self'; style-src
    'self' 'strict-dynamic' 'nonce-{NONCE_VALUE}'; style-src-attr 'self'
    'unsafe-inline'; img-src *;
{{- end }}
